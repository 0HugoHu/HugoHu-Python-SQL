[![Install](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/install.yml/badge.svg)](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/install.yml)

[![Lint](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/lint.yml/badge.svg)](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/lint.yml)

[![Format](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/format.yml/badge.svg)](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/format.yml)

[![Test](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/test.yml/badge.svg)](https://github.com/nogibjj/HugoHu-Python-SQL/actions/workflows/test.yml)

## Week 5 Mini-project

> Â© Yadong (Hugo) Hu 2023
> 
> This project was generated by this [Awesome Template](https://github.com/0HugoHu/IDS706-Python-Template)

<br />

**Python Script interacting with SQL Database**

- Connect to a SQL database
- Perform CRUD operations
- Write at least two different SQL queries

<br />


## Project Description
This project uses ```sqlite3``` library to interact with a SQL database.  The project also uses ```pytest``` library to test the functions in the python script.

### Create
```python
def create_db():
    conn = sqlite3.connect("mydb.db")
    cursor = conn.cursor()
    cursor.execute(
        """CREATE TABLE IF NOT EXISTS employees
                      (id INTEGER PRIMARY KEY,
                       name TEXT,
                       department TEXT)"""
    )
    conn.commit()
    print("Table created")
    return conn
```

### Update
```python
def update_db(conn):
    cursor = conn.cursor()
    cursor.execute("UPDATE employees SET department = 'HR' WHERE name = 'Jane Smith'")
    conn.commit()
    print("Records updated")
```

### Read
```python
def retrieve_db(conn):
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM employees")
    rows = cursor.fetchall()

    for row in rows:
        print(row)
    print("Records retrieved")
```
And another query:
```python
def retrieve_db2(conn):
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM employees WHERE department = 'HR'")
    rows = cursor.fetchall()

    for row in rows:
        print(row)
    print("Records retrieved")
```

### Delete
```python
def drop_table():
    conn = sqlite3.connect("mydb.db")
    cursor = conn.cursor()
    cursor.execute(
        "DROP TABLE IF EXISTS employees"
    )  # Drop the "employees" table if it exists
    conn.commit()
    conn.close()
    print("Table dropped")
```

<br />

## Demo


### CURD Operations
![](/.tutorial/w5-1.png)


### Pytest
![](/.tutorial/w5-2.png)

<br />

## Run

### Some Makefile Commands
```commandline
make clean
make install
make format
make lint
make test
make run
```
